---
title: Virtualization
layout: AdvLinux
---
<!--Learning Outcomes for this topic-->
<h3>Virtualization</h3>
<p>Learning outcomes:
    <ul>
        <li>Able to describe the advantages and disadvantages of virtualization resources for tasks such as snapshots/backups </li>
        <li>Able to describe what Infrastructure as a Service (IaaS) and Infrastructure as Code (IaC) are used for and the importance of them</li>
    </ul>
</p>

<!--embed Youtube video here-->
<div class="video-wrapper">
    <iframe width="560" height="315" src="https://www.youtube.com/embed/oKdYZ2dN1DM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>

<!--Download PowerPoint-->
<p>
    <a href="/LinuxAdmin/CIS245 Week 10.pptx">Would you like to download my PowerPoint to follow along?</a>
</p>
<!--Outline Of lecture notes/powerpoint for the topic-->
<p>
    <ul>
        <li>Why Virtualize?</li>
            <ul>
                <li><a href="https://www.cisco.com/c/dam/en/us/solutions/enterprise-networks/2021-networking-report.pdf">According to Cisco's 2021 Networking report</a>Resilience is one of the top important trends of 2022, because of the pandemic 7 out of 10 companies have experienced at least 1 severe crisis and 95% think it won't be their last </li>
                <li>Remote work and Work from Home (WFH) has been a huge trend in the last couple years which means all the infrastructure needs to be scaled and flexible to respond</li>
                <li>Automation is a trend to help deal with fewer people in the workforce, and higher demands of IT professionals, including server provisioning, configuration and management. This also helps improve compliance which is becoming more regulated.</li>
                <li>Next trend on the horizon is AI and Machine learning</li>
            </ul>
        <li><a href="https://www.statista.com/topics/6795/virtualization/#topicHeader__wrapper">Virtualization Statistics</a></li> 
            <ul>
                <li>Global server virtualization market is around 7 billion, expected to grow to 10 billion by 2026</li>
                <li>Server virtualization market was 7billion in 2020</li>
                <li>Desktop virtualization market predicted to be 12billion by 2026</li>
                <li>The average hourly cost of critical server outages is between 300,000-400,000USD in 2020</li>
                <li>AWS is 33% of the cloud market share Q1 2022</li>
                <li>Global cloud applications market is valued at 133.6 billion, expected to reach 168.6 billion by 2025. Annual compound growth rate expected to be 4.8%</li>
                <li>About a half of companies' IT budget goes to cloud services, up from 1/3 3 years ago</li>
            </ul>
        <li>Virtualization Vocab</li>
            <ul>
                <li>Host - The computer running the VM</li>
                <li>Guest - The VM (Virtual Machine)</li>
                <li>Hypervisor - Software that manages multiple OS on a single system</li>
                <li>Snapshot - An image of a VM that you can go back to, like a save state</li>
                <li>Hardware Virtualization - Hardware virtualization means you have a VM acting like a real computer</li>
                    <ul>
                        <li>Full virtualization means an almost complete mimicry of the hardware, applications don't need to be modified to run</li>
                        <li>Paravirtualization runs applications in isolated domains, hardware isn't mimicked, applications must be modified to run</li>
                        <li>Hardware-assisted virtualization added in 2006-ish also referred to as accelerated virtualization</li>
                    </ul>
                <li><a href="https://web.archive.org/web/20221012081219/https://computer.howstuffworks.com/server-virtualization.htm">How server Virtualization Works</a></li>    
            </ul>
        <li>Virtual vs Physical servers</li>
            <ul>
                <li>Virtual Servers</li>
                    <ul>
                        <li>Pros</li>
                            <ul>
                                <li>Smaller upfront cost (no hardware purchase or decision needed)</li>
                                <li>Depending on  needs can be cheaper over the lifetime of the server</li>
                                <li>Potential for expert assistance or on-call support</li>
                                <li>Reduced in house IT staff</li>
                            </ul>
                        <li>Cons</li>
                        <ul>
                            <li>Potential for higher monthly costs instead of initial investment</li>
                            <li>Potential application compatibility issues, might have vendor lock-in</li>
                            <li>Not all vendors can work with virtualized servers (Rapidly Changing)</li>
                            <li>Not in control of your physical server or what's running on it</li>
                        </ul>
                    </ul>
                <li>Physical Servers</li>
                    <ul>
                        <li>Pros</li>
                            <ul>
                                <li>Dedicated resources (mission critical systems)</li>
                                <li>Potentially convenient physical location</li>
                                <li>Fully Customizable</li>
                            </ul>
                        <li>Cons</li>
                        <ul>
                            <li>$$$ for server, Maintenance and hardware replacements</li>
                            <li>IT staff responsible for setup, config and Maintenance</li>
                            <li>Contractor/consultant might be needed with config/repairs depending on your IT staff</li>
                            <li>Hard to scale because you're purchasing your own hardware</li>
                            <li>Needs physical space</li>
                        </ul>
                    </ul>
            </ul>
        <li>How to manage VMs in house</li>
            <ul>
                <li>Most servers sold now are investments ($$$) and have multiple cores. If you're running more than 1 server virtualization makes your life easier</li>
                <li>You'll need to dedicate hardware resources (but not as much as you might think) to the host machine. Servers tend to be idle a lot and therefore don't need a ton of resources.</li>
                <li>Caution: This works for small load machines and things that don't need to be getting tons of hits, and are not mission critical, think about what your company/you need and what happens if the law of averages comes back for you.  Also, Databases are beasts</li>
                <li>Software such as VMWare, Hyper-V (MS) or Citrix XenServer will help you manage your virtual servers</li>
            </ul>
        <li><a href="https://web.archive.org/web/20221101113602/https://www.redhat.com/en/topics/virtualization/what-is-virtualization-management"></a>General Virtualization Management</li>
            <ul>
                <li>Snapshots capture the state of your Virtual machine at a point in time.  Which you can then go back to. </li>
                <li>Migration means we can move those snapshots to another host</li>
                <li>Failover allows your VM to continue working if the host fails.  Failover goes back to the last working state, which isn't necessarily the point in time at which the failure happened</li>
            </ul>
        <li>Nested Virtualization</li>
            <ul>
                <li>At this point in time, seriously, just use <a href="/LinuxAdmin/containers.html">containers</a>.</li>
                <li>Virtualization inside a virtual environment</li>
                    <ul>
                        <li>Running a Hypervisor inside a virtual machine</li>
                        <li>Running a hypervisor inside a hypervisor</li>
                        <li>Main level Hypervisor is Level 0 or L0</li>
                        <li>Hypervisor running inside the VM is level 1 or L1</li>
                        <li>Can continue to have levels L2, L3..,</li>
                    </ul>
            </ul>
        <li>Infrastructure as a Service(IaaS)</li>
            <ul>
                <li>You can rent hardware as needed.  Some services also allow software to be rented.</li>
                <li>Allows you to outsource your computer infrastructure rather than maintain in house</li>
                <li>Relates to SaaS (Software as a Service) and PaaS (Platform as a Service)</li>
                <li>Smaller companies might not have the $$ or space to host a whole infrastructure</li>
                <li>Gives a more reliable billing schedule (monthly rather than needing to buy hardware)</li>
                <li>Can have reliability guarantees in house infrastructure won't have</li>
            </ul>
        <li>Cloud</li>
            <ul>
                <li>On demand availability of resources.  Generally rentable through vendors, or sometimes offered free in small amounts. </li>
                    <ul>
                        <li>Enterprise Cloud for a single organization</li>
                        <li>Public cloud available to many companies</li>
                    </ul>
                <li>Cloud tries to take advantage of economies of scale, I.e. cheaper to buy in bulk</li>    
                <li>Allows a pay as you go model, monthly pricing, or paying for services as needed which can give reliable bills to surprise bills depending on your company and agreement with your cloud provider</li>
                    <ul>
                        <li>Gets further into the as a Service model (PaaS, SaaS, BaaS ans XaaS)</li>
                        <li>BaaS is backend as a service</li>
                        <li>XaaS is everything as a service</li>
                    </ul>
            </ul>
        <li>Infrastructure as Code (IaC)</li>
            <ul>
                <li>Idea comes from scaling issues</li>
                <li>Manage and provision computers through (machine readable) files instead of configs.</li>
                <li>Includes both physical resources and virtual machines and its resources.</li>
                <li>Can use a version control style system to hold the definitions of the infrastructure</li>
                <li>Being able to model infrastructure with code, then working with it using software design best practices is popular</li>
                <li>Shareability is also useful, for example if you need to set up an Apache Server you can find a recipe to do it</li>
                <li>Pros include reduction of costs (setup and maintenance) speed and reduced risk (automation and programs have less human error) Allows your team to focus on things besides infrastructure maintenance</li>
                <li><a href="https://web.archive.org/web/20221030161532/https://www.redhat.com/en/topics/automation/what-is-infrastructure-as-code-iac">IaC by RedHat</a></li>
                <li><a href="https://web.archive.org/web/20221021051800/https://learn.microsoft.com/en-us/devops/deliver/what-is-infrastructure-as-code">IaC by Microsoft</a></li>
                <li><a href="https://web.archive.org/web/20221006180804/https://docs.aws.amazon.com/whitepapers/latest/introduction-devops-aws/infrastructure-as-code.html">IaC by AWS</a></li>
            </ul>
        <li>How to use and work with IaC</li>
            <ul>
                <li>Declarative approach  - What is your target configuration?</li>
                <li>Imperative approach - How do we change to get to the target?</li>
                <li>Intelligent approach - Why the configuration needs to be a certain way to get to the target while keeping relationships of apps in mind</li>
                <li>Pull method - Server will pull configuration from controlling server</li>
                <li>Push method - Controlling server pushes the configuration to the destination</li>
                <li>Continuous configuration automation tools are frameworks to base off of</li>
                <li>Also a way to support best practices in DevOps, get the devs involved with the config process and so they know more about the servers being created and maintained</li>
            </ul>
        <li>Configurations of IaC</li>
                    <ul>
                        <li>Setup - List of what you need to do to get the system ready, such as installing packages</li>
                            <ul>
                                <li>Some examples of ways you can do this include: Chef, Puppet and Ansible</li>
                            </ul>
                        <li>Provisioning - Describing what you need to provision (spin up your VM)  in your infrastructure</li>
                        <ul>
                            <li>Some examples of ways you can do this include: Terraform and CloudFormation(AWS specific).  Other cloud providers may have specific ones they use</li>
                        </ul>
                    </ul>
    </ul>   
<!--Discussions and activities for the topic-->
<p>Suggested Activities and Discussion Topics:
    <ul>
        <li>Pick one of the following products.  Research the product/Vendor, pros and cons, and make an executive summary of your recommendation for Acme Corp.
            <ul>
                <li>Chef</li>
                <li>Puppet</li>
                <li>Ansible</li>
                <li>SaltStack</li>
                <li>CFEngine</li>
            </ul>
        </li>
        <li>You've been tasked by your team to decide which IaaS we should use. Break into teams and research the following options. Make a list of pros and cons, and have a 1 page executive summary of if you think your IaaS is a good fit for Acme Corp (You can decide what Acme Corp needs)
            <ul>
                <li>AWS</li>
                <li>IBM Cloud</li>
                <li>Oracle Cloud</li>
                <li>Google Cloud</li>
                <li>Azure</li>
                <li>Digital Ocean</li>
                <li>Wasabi</li>
            </ul>
        </li>
        <li>You've been tasked by your team to decide which VM software we should use. Research the following options. Make a list of pros and cons for each, and have a 1 page executive summary of if you think your software is a good fit for Acme Corp (You can decide what Acme Corp needs)
            <ul>
                <li>Citrix</li>
                <li>VMWare (Both ESXI and VSphere)</li>
                <li>Hyper-V</li>
                <li>KVM</li>
            </ul>
        </li>
    </ul>
</p>

<!--Link to my classes page-->
<p>Would you like to see some more classes?  
    <a href="/classes.html">Click here </a>
</p>